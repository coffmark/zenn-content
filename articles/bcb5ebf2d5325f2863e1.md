---
title: "Mac ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã‚¢ãƒ—ãƒªã®å³ã‚¯ãƒªãƒƒã‚¯ã¨å·¦ã‚¯ãƒªãƒƒã‚¯ã®åˆ†ã‘æ–¹"
emoji: "ğŸ•"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Swift", "MacOS"]
published: true
---

## Macã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã‚¢ãƒ—ãƒªã§å³ã‚¯ãƒªãƒƒã‚¯ã¨å·¦ã‚¯ãƒªãƒƒã‚¯ã®æŒ™å‹•ã‚’åˆ†ã‘ãŸã„

```swift:AppDelegate.swift
class AppDelegate: NSObject, NSApplicationDelegate {
  func applicationDidFinishedLaunching(_ notification: Notification) {
    // .....
    // .....

    if let button = statusItem?.button {
        button.image = NSImage(named: "iconImage")
        button.action = #selector(self.statusBarButtonClicked(_:))
        button.sendAction(on: [.leftMouseUp, .rightMouseUp])
    }
    // Add Menu Item for NSMenu
    menu.addItem(NSMenuItem(title: "Quit", action: #selector(NSApplication.terminate(_:)), keyEquivalent: "q"))
  }
  @objc func statusBarButtonClicked(_ sender: NSStatusBarButton) {
    let event = NSApp.currentEvent!
    if event.type == NSEvent.EventType.rightMouseUp {
      print("Right Click")
      statusItem?.menu = menu
      statusItem?.button?.performClick(nil)
      // statusItem?.popUpMenu(menu)
      statusItem?.menu = nil
    } else {
      print("Left Click")
      togglePopover(sender)
    }
  }
}
```

`NSEvent.EventType`ã§ãƒã‚¦ã‚¹ã®å³ã‚¯ãƒªãƒƒã‚¯ã‹å·¦ã‚¯ãƒªãƒƒã‚¯ã‚’åˆ¤åˆ¥ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã‚³ãƒ¡ãƒ³ãƒˆã§æ¶ˆã—ã¦ã‚ã‚Šã¾ã™ãŒã€`popUpMenu()`ã¯`'popUpMenu' was deprecated in macOS 10.14`ã¨ãªã£ã¦ãŠã‚Šã¾ã™ã€‚

`popUpMenu()`ã§ã‚‚å®Ÿéš›ã«ã¯ã†ã¾ãå‹•ãã¾ã—ãŸãŒã€
`statusItem?.button?.performClick(nil)`ã‚’ä»£ã‚ã‚Šã«ä½¿ã†ã¨è‰¯ã•ãã†ã§ã™ã€‚

ã“ã‚Œã§ã€ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã¨è¨­å®šãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’åˆ‡ã‚Šåˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚

æœ€å¾Œã¾ã§èª­ã‚“ã§ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚

### å‚è€ƒ

https://stackoverflow.com/questions/33257848/left-vs-right-click-status-bar-item-mac-swift-2/68124596#68124596

https://samoylov.eu/2016/09/14/handling-left-and-right-click-at-nsstatusbar-with-swift-3/

